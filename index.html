<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nuno · Analytics Playground</title>

  <!-- PyScript (Python in the browser) -->
  <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css">
  <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>
  <py-config>
    packages = ["numpy", "matplotlib"]
  </py-config>

  <!-- Plotly (2D + 3D) -->
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

  <!-- Base styling -->
  <style>
    :root{
      --bg:#0f172a;          /* slate-900 */
      --panel:#0b1226;       /* deep panel */
      --muted:#94a3b8;       /* slate-400 */
      --text:#e5e7eb;        /* zinc-200 */
      --brand:#06b6d4;       /* cyan-500 */
      --brand-2:#22d3ee;     /* cyan-400 */
      --accent:#38bdf8;      /* sky-400 */
      --card:#0b1226;
      --ring: rgba(56,189,248,.35);
      --shadow: 0 10px 30px rgba(2,8,23,.28);
      --radius: 18px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 600px at 10% -10%, rgba(56,189,248,.10), transparent 50%),
                  radial-gradient(1200px 600px at 110% 20%, rgba(34,211,238,.10), transparent 50%),
                  var(--bg);
      color:var(--text);
      display:flex;
      min-height:100vh;
    }

    /* Sidebar */
    .sidebar{
      width:260px;
      background: linear-gradient(180deg, rgba(2,8,23,.7), rgba(2,8,23,.25)), var(--panel);
      border-right:1px solid rgba(148,163,184,.12);
      padding:20px 18px;
      position:sticky;
      top:0;
      height:100vh;
    }
    .logo{
      display:flex; align-items:center; gap:12px; margin-bottom:14px;
    }
    .logo svg{width:34px;height:34px; filter:drop-shadow(0 4px 10px rgba(34,211,238,.35))}
    .logo h1{font-size:18px; margin:0; letter-spacing:.3px}
    .subtle{color:var(--muted); font-size:13px; margin:0 0 22px}

    .side-group{margin-top:18px}
    .side-title{font-size:12px; text-transform:uppercase; letter-spacing:.16em; color:#86a2c2; margin:10px 10px}
    .side-link{
      display:flex; align-items:center; gap:10px;
      padding:10px 12px; margin:6px 6px; border-radius:12px;
      color:var(--text); text-decoration:none;
      border:1px solid rgba(148,163,184,.10);
      background:linear-gradient(180deg, rgba(148,163,184,.06), rgba(148,163,184,.02));
      transition:transform .08s ease, border-color .2s ease, background .2s ease;
    }
    .side-link:hover{transform:translateY(-1px); border-color:rgba(34,211,238,.35)}
    .pill{margin-left:auto; font-size:11px; color:#9bdff3; background:rgba(34,211,238,.15); padding:2px 8px; border-radius:999px; border:1px solid rgba(34,211,238,.25)}

    /* Main area */
    .container{flex:1; display:flex; flex-direction:column}
    .topbar{
      position:sticky; top:0; z-index:10;
      backdrop-filter: blur(10px);
      background: linear-gradient(180deg, rgba(2,8,23,.65), rgba(2,8,23,.35));
      border-bottom:1px solid rgba(148,163,184,.12);
    }
    .top-wrap{display:flex; align-items:center; justify-content:space-between; padding:12px 20px}
    .menu{
      display:flex; gap:10px; padding:8px; border-radius:999px; background:rgba(148,163,184,.10); border:1px solid rgba(148,163,184,.16)
    }
    .menu button{
      background:transparent; border:0; color:var(--text); padding:10px 14px; border-radius:999px; font-weight:600; cursor:pointer; font-size:14px;
    }
    .menu button.active{background:linear-gradient(180deg, rgba(34,211,238,.22), rgba(34,211,238,.1)); box-shadow: inset 0 0 0 1px rgba(34,211,238,.35)}

    .content{padding:22px; max-width:1200px; margin:0 auto; width:100%}
    .card{
      background: linear-gradient(180deg, rgba(148,163,184,.07), rgba(148,163,184,.03));
      border:1px solid rgba(148,163,184,.12);
      box-shadow: var(--shadow);
      border-radius: var(--radius);
      padding:20px;
      margin-bottom:20px;
    }
    h2{margin:0 0 8px; font-size:20px}
    p.lead{margin:0 0 12px; color:#c7d2fe}

    /* Plots */
    .grid{display:grid; grid-template-columns:1fr 1fr; gap:16px}
    .plot{min-height:420px; border-radius:14px; background:var(--card); border:1px solid rgba(148,163,184,.12); padding:8px}

    /* Matrix UI */
    .matrix{
      display:grid; grid-template-columns:repeat(3, 90px); gap:8px; margin:10px 0 6px;
    }
    .matrix input{
      width:100%; padding:10px 8px; border-radius:10px;
      border:1px solid rgba(148,163,184,.25);
      background:rgba(2,8,23,.4); color:var(--text);
      outline:none;
    }
    .actions{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
    .btn{
      background:linear-gradient(180deg, rgba(34,211,238,.28), rgba(34,211,238,.12));
      border:1px solid rgba(34,211,238,.45);
      color:var(--text); font-weight:700; padding:10px 14px; border-radius:12px; cursor:pointer;
    }
    .btn.secondary{
      background:transparent; border:1px solid rgba(148,163,184,.3);
    }
    pre, code{
      background:rgba(2,8,23,.55);
      border:1px solid rgba(148,163,184,.18);
      border-radius:12px; padding:12px; overflow:auto; color:#d1fae5
    }

    /* Tabs (subpages) */
    .tab{display:none}
    .tab.active{display:block}

    /* Responsive */
    @media (max-width: 1040px){
      .grid{grid-template-columns:1fr}
      .sidebar{display:none}
      .content{padding:18px}
    }
  </style>
</head>
<body>
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="logo">
      <!-- Inline SVG logo -->
      <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <defs>
          <linearGradient id="g" x1="0" x2="1" y1="0" y2="1">
            <stop stop-color="#22d3ee"/><stop offset="1" stop-color="#38bdf8"/>
          </linearGradient>
        </defs>
        <circle cx="32" cy="32" r="28" stroke="url(#g)" stroke-width="3"/>
        <path d="M18 36c10-2 18-10 28-8M20 44c8-4 16-4 24-2" stroke="url(#g)" stroke-width="3" stroke-linecap="round"/>
      </svg>
      <h1>Analytics Playground</h1>
    </div>
    <p class="subtle">Interactive demos: PyScript & Plotly</p>

    <div class="side-group">
      <div class="side-title">Sections</div>
      <a href="#" class="side-link" onclick="openTab('js')">
        JavaScript Demos <span class="pill">2D + 3D</span>
      </a>
      <a href="#" class="side-link" onclick="openTab('py')">
        Python Demos <span class="pill">Matrix + Plot</span>
      </a>
    </div>

    <div class="side-group">
      <div class="side-title">Resources</div>
      <a class="side-link" href="https://plotly.com/javascript/" target="_blank" rel="noopener">Plotly.js Docs</a>
      <a class="side-link" href="https://pyscript.net/" target="_blank" rel="noopener">PyScript Docs</a>
    </div>
  </aside>

  <!-- Main -->
  <div class="container">
    <!-- Top nav -->
    <header class="topbar">
      <div class="top-wrap">
        <div style="display:flex;align-items:center;gap:10px">
          <span style="font-weight:800;letter-spacing:.12em;color:#9bdff3">NUNO • DEMOS</span>
        </div>
        <nav class="menu" role="tablist" aria-label="Subpages">
          <button id="btn-js" class="active" onclick="openTab('js')" aria-controls="tab-js" aria-selected="true">JavaScript</button>
          <button id="btn-py" onclick="openTab('py')" aria-controls="tab-py" aria-selected="false">Python</button>
        </nav>
      </div>
    </header>

    <!-- Content -->
    <main class="content">
      <!-- JS TAB -->
      <section id="tab-js" class="tab active" role="tabpanel" aria-labelledby="btn-js">
        <div class="card">
          <h2>JavaScript Examples (Plotly)</h2>
          <p class="lead">Interactive 2D and 3D plots rendered entirely in the browser.</p>
        </div>

        <div class="grid">
          <div class="card">
            <h3 style="margin:0 0 10px">2D Line Chart: sin(x), cos(x)</h3>
            <div id="js-plot-2d" class="plot" aria-label="2D Plot"></div>
          </div>

          <div class="card">
            <h3 style="margin:0 0 10px">3D Surface: z = sin(x)·cos(y)</h3>
            <div id="js-plot-3d" class="plot" aria-label="3D Plot"></div>
          </div>
        </div>
      </section>

      <!-- PY TAB -->
      <section id="tab-py" class="tab" role="tabpanel" aria-labelledby="btn-py">
        <div class="card">
          <h2>Python Examples (PyScript)</h2>
          <p class="lead">Run Python in-browser: invert a 3×3 matrix and draw a Matplotlib plot.</p>
        </div>

        <div class="grid">
          <div class="card">
            <h3 style="margin:0 0 10px">3×3 Matrix Inversion</h3>
            <p class="subtle" style="margin:0 0 6px">Enter values and click <strong>Invert</strong>. Uses <code>numpy.linalg.inv</code>.</p>
            <div class="matrix">
              <input id="a11" type="number" value="1" step="any" />
              <input id="a12" type="number" value="2" step="any" />
              <input id="a13" type="number" value="3" step="any" />
              <input id="a21" type="number" value="0" step="any" />
              <input id="a22" type="number" value="1" step="any" />
              <input id="a23" type="number" value="4" step="any" />
              <input id="a31" type="number" value="5" step="any" />
              <input id="a32" type="number" value="6" step="any" />
              <input id="a33" type="number" value="0" step="any" />
            </div>
            <div class="actions">
              <button class="btn" py-click="invert_matrix()">Invert</button>
              <button class="btn secondary" py-click="reset_matrix()">Reset</button>
            </div>
            <div style="height:10px"></div>
            <div id="py-matrix-output"></div>
          </div>

          <div class="card">
            <h3 style="margin:0 0 10px">Matplotlib Plot (Python)</h3>
            <div id="py-plot-out" class="plot"></div>
            <div id="py-meta" class="subtle" style="margin-top:10px"></div>
          </div>
        </div>

        <!-- PyScript code block -->
        <py-script>
import datetime, numpy as np, matplotlib.pyplot as plt
from pyscript import display, Element

def _read_matrix():
    ids = ["a11","a12","a13","a21","a22","a23","a31","a32","a33"]
    vals = [float(Element(i).value) for i in ids]
    A = np.array(vals, dtype=float).reshape((3,3))
    return A

def _format_matrix(M, name):
    with np.printoptions(precision=4, suppress=True):
        return f"{name} =\n{M}\n"

def invert_matrix():
    try:
        A = _read_matrix()
        det = float(np.linalg.det(A))
        if abs(det) < 1e-12:
            display("<pre>Matrix is singular (det≈0), cannot invert.</pre>", target="py-matrix-output", append=False)
            return
        Ainv = np.linalg.inv(A)
        I = A @ Ainv
        txt  = "<pre>"
        txt += _format_matrix(A, "A")
        txt += f"det(A) = {det:.6f}\n\n"
        txt += _format_matrix(Ainv, "A⁻¹")
        txt += _format_matrix(I, "A·A⁻¹")
        txt += "</pre>"
        display(txt, target="py-matrix-output", append=False)
    except Exception as e:
        display(f"<pre>Error: {e}</pre>", target="py-matrix-output", append=False)

def reset_matrix():
    defaults = [1,2,3,0,1,4,5,6,0]
    for i, id_ in enumerate(["a11","a12","a13","a21","a22","a23","a31","a32","a33"]):
        Element(id_).element.value = defaults[i]
    invert_matrix()

# Draw a Matplotlib plot
x = np.linspace(0, 2*np.pi, 400)
y = np.sin(x) * np.exp(-0.15*x)
fig, ax = plt.subplots()
ax.plot(x, y, linewidth=2)
ax.set_title("Damped Sine (Matplotlib)")
ax.set_xlabel("x"); ax.set_ylabel("sin(x)·e^{-0.15x}")
ax.grid(True, alpha=.35)
display(fig, target="py-plot-out")

# Meta info
now = datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S")
display(f"Python initialized at: <code>{now}</code>", target="py-meta")
        </py-script>
      </section>
    </main>
  </div>

  <!-- JavaScript logic -->
  <script>
    // Tab handling
    function openTab(which){
      const js = document.getElementById('tab-js');
      const py = document.getElementById('tab-py');
      const bjs = document.getElementById('btn-js');
      const bpy = document.getElementById('btn-py');
      if(which === 'js'){
        js.classList.add('active'); py.classList.remove('active');
        bjs.classList.add('active'); bpy.classList.remove('active');
      }else{
        py.classList.add('active'); js.classList.remove('active');
        bpy.classList.add('active'); bjs.classList.remove('active');
      }
    }

    // Plotly 2D: sin & cos
    function draw2D(){
      const N = 400, xs = [], ys = [], yc = [];
      for(let i=0;i<N;i++){
        const x = i*(2*Math.PI)/(N-1);
        xs.push(x); ys.push(Math.sin(x)); yc.push(Math.cos(x));
      }
      const data = [
        {x:xs, y:ys, mode:'lines', name:'sin(x)'},
        {x:xs, y:yc, mode:'lines', name:'cos(x)'}
      ];
      const layout = {
        title:'Sine & Cosine (Plotly 2D)',
        xaxis:{title:'x'}, yaxis:{title:'y'}, margin:{t:48, r:12, b:48, l:48}
      };
      Plotly.newPlot('js-plot-2d', data, layout, {responsive:true});
    }

    // Plotly 3D: z = sin(x)·cos(y)
    function draw3D(){
      const x = [], y = [];
      for(let i=0;i<=60;i++){ x.push(-3 + 6*i/60); y.push(-3 + 6*i/60); }
      const z = [];
      for(let i=0;i<x.length;i++){
        const row = [];
        for(let j=0;j*y.length;j++){
          const xx = x[i], yy = y[j];
          row.push(Math.sin(xx) * Math.cos(yy));
        }
        z.push(row);
      }
      const data = [{ type:'surface', x:x, y:y, z:z, contours:{ z:{show:true, usecolormap:true, highlightcolor:'white', project:{z:true}}}}];
      const layout = {
        title:'Surface z = sin(x)·cos(y) (Plotly 3D)',
        scene:{ xaxis:{title:'x'}, yaxis:{title:'y'}, zaxis:{title:'z'} },
        margin:{l:0,r:0,b:0,t:48}
      };
      Plotly.newPlot('js-plot-3d', data, layout, {responsive:true});
    }

    // Init
    draw2D();
    draw3D();
  </script>
</body>
</html>
